name: complex-setup-app
description: An app with complex setup used for testing
version: 0.0.1

local:
  environment-variables:
    APP_ENV: APP_ENV_VAL
  secrets:
    - APP_SECRET
  dependencies:
    exocom:
      image: originate/exocom:0.27.0
    mongo:
      image: mongo:3.4.0
      config:
        persist:
          - /data/db
        dependency-environment:
          DB_NAME: 'test-db'
        service-environment:
          COLLECTION_NAME: 'test-collection'

remote:
  dependencies:
    exocom:
      type: exocom
      config:
        version: 0.27.0
  environments:
    qa:
      url: originate.com

services:
  html-server:
    location: ./html-server
  api-service:
    location: ./api-service
  external-service:
    docker-image: originate/test-web-server:0.0.1
  users-service:
    dependency-data:
      exocom:
        translations:
          - public: users create
            internal: mongo create
    location: ./users-service
  todo-service:
    location: ./todo-service

shared-directories:
  - shared
