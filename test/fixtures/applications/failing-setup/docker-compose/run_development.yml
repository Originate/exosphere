version: "3"
services:
  crasher:
    build:
      context: ${APP_PATH}/crasher
      dockerfile: Dockerfile.dev
    volumes:
    - ${APP_PATH}/crasher:/mnt
    environment:
      EXOCOM_HOST: exocom
      ROLE: crasher
    depends_on:
    - exocom
    restart: on-failure
  exocom:
    image: originate/exocom:0.27.0
    environment:
      SERVICE_DATA: '{"crasher":{},"runner":{}}'
    restart: on-failure
  runner:
    build:
      context: ${APP_PATH}/runner
      dockerfile: Dockerfile.dev
    volumes:
    - ${APP_PATH}/runner:/mnt
    environment:
      EXOCOM_HOST: exocom
      ROLE: runner
    depends_on:
    - exocom
    restart: on-failure
volumes: {}
