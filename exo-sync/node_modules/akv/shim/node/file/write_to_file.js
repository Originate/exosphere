/**
 * @function writeToFile
 * @param {string} filename
 * @returns {Promise}
 */
'use strict';

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _stringify = require('babel-runtime/core-js/json/stringify');

var _stringify2 = _interopRequireDefault(_stringify);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var co = require('co');
var path = require('path');

var _require = require('asfs');

var mkdirpAsync = _require.mkdirpAsync;
var writeFileAsync = _require.writeFileAsync;

/** @lends writeToFile */

function writeToFile(filename, data) {
  return co(_regenerator2.default.mark(function _callee() {
    var dirname, dataString;
    return _regenerator2.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            dirname = path.dirname(filename);
            _context.next = 3;
            return mkdirpAsync(dirname);

          case 3:
            dataString = (0, _stringify2.default)(data);
            _context.next = 6;
            return writeFileAsync(filename, dataString);

          case 6:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, this);
  }));
}

module.exports = writeToFile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX3RvX2ZpbGUuanMiXSwibmFtZXMiOlsiY28iLCJyZXF1aXJlIiwicGF0aCIsIm1rZGlycEFzeW5jIiwid3JpdGVGaWxlQXN5bmMiLCJ3cml0ZVRvRmlsZSIsImZpbGVuYW1lIiwiZGF0YSIsImRpcm5hbWUiLCJkYXRhU3RyaW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FBS0E7Ozs7Ozs7Ozs7OztBQUVBLElBQU1BLEtBQUtDLFFBQVEsSUFBUixDQUFYO0FBQ0EsSUFBTUMsT0FBT0QsUUFBUSxNQUFSLENBQWI7O2VBQ3dDQSxRQUFRLE1BQVIsQzs7SUFBaENFLFcsWUFBQUEsVztJQUFhQyxjLFlBQUFBLGM7O0FBRXJCOztBQUNBLFNBQVNDLFdBQVQsQ0FBc0JDLFFBQXRCLEVBQWdDQyxJQUFoQyxFQUFzQztBQUNwQyxTQUFPUCw4QkFBRztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDSlEsbUJBREksR0FDTU4sS0FBS00sT0FBTCxDQUFhRixRQUFiLENBRE47QUFBQTtBQUFBLG1CQUVGSCxZQUFZSyxPQUFaLENBRkU7O0FBQUE7QUFHSkMsc0JBSEksR0FHUyx5QkFBZUYsSUFBZixDQUhUO0FBQUE7QUFBQSxtQkFJRkgsZUFBZUUsUUFBZixFQUF5QkcsVUFBekIsQ0FKRTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUFILEVBQVA7QUFNRDs7QUFFREMsT0FBT0MsT0FBUCxHQUFpQk4sV0FBakIiLCJmaWxlIjoid3JpdGVfdG9fZmlsZS5qcyIsInNvdXJjZVJvb3QiOiJsaWIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmdW5jdGlvbiB3cml0ZVRvRmlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGNvID0gcmVxdWlyZSgnY28nKVxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxuY29uc3QgeyBta2RpcnBBc3luYywgd3JpdGVGaWxlQXN5bmMgfSA9IHJlcXVpcmUoJ2FzZnMnKVxuXG4vKiogQGxlbmRzIHdyaXRlVG9GaWxlICovXG5mdW5jdGlvbiB3cml0ZVRvRmlsZSAoZmlsZW5hbWUsIGRhdGEpIHtcbiAgcmV0dXJuIGNvKGZ1bmN0aW9uICogKCkge1xuICAgIGxldCBkaXJuYW1lID0gcGF0aC5kaXJuYW1lKGZpbGVuYW1lKVxuICAgIHlpZWxkIG1rZGlycEFzeW5jKGRpcm5hbWUpXG4gICAgbGV0IGRhdGFTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIHlpZWxkIHdyaXRlRmlsZUFzeW5jKGZpbGVuYW1lLCBkYXRhU3RyaW5nKVxuICB9KVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdyaXRlVG9GaWxlXG4iXX0=